course: ISEX2
year: 2020
report: S2
department: 工情
id: 8165
name: 和田哲也
email: wada.tetsuya11@gmail.com
computer:  自宅のパソコン Mac
compiler: Scilab
hour: 3

<<EX-2.1>>

[＿EX-2.1 ＿]  ap*(as^k)
意味：直接音および反射音の減衰率

<<EX-2.2>>

[＿EX-2.2 ＿]  dp+(ds*k)  
意味：直接音および反射音の遅延長

<<EX-2.3>>

dpは初期反射音の遅延長、dsは高次元反射音の遅延長であるり、単位はそれぞれ「回」である。dp、dsはサンプリング周波数fsの0.050倍、0.025倍となっているが、これはすなわち、周波数fsで0.050秒、0.025秒の間に発する音の数（カウント）である。よって、dp回、ds回分の遅延、という使い方になる。

<<EX-2.4>>

再生する音声全体でlength_of_s回だけ音が発され、nはそのうち何回目かを表すカウントである。k番目の音の遅延時間が現在のカウントより小さい＝遅延時間以上経過しているならば音を発生する、という意味である。逆に、遅延時間よりカウントの方が小さければその音は鳴らさなということである。

<<EX-2.5>>

期待される結果としては、original.wavでははっきりと聞こえる音が、echo.wavでは10個の反射音を発生させているため、エコーが入ってやまびこのように反響が響いて、かつ反射音が遅れて聞こえると予想した。実際に聞いてみると、echo.wavでは確かに音が反響していたが、狭い室内で話しているときや、カラオケでエコーを小さく設定したときのような、わずかな反響であった。音が反射していることはなんとなく感じられたが、音が遅れて聞こえることはなく、反射波の遅延をはっきりと感じることはなかった。

<<EX-2.6>>

期待される結果としては、echo.wavではわずかであった音の反響が、echo_large.wavでは反響に対してより大きな遅延を感じると予想した。実際に聞いてみると、やはりecho_large.wavではecho.wavに比べて反射音がはっきりと感じられた。echo.wavでは狭い室内で話している程度に感じられた反射音が、echo_largeでは、学校の運動場のアナウンスや、街中の避難誘導のアナウンスくらい反射音が遅延していることが感じられた。減衰率が同じでも、遅延時間の違いによって、聞き取りにくさや遅延している感じが大きく変わることが感じられた。

<<EX-2.7>>

浴室として床面が２m四方の正方形、高さが３mの空間を考える。この浴室にA,Bの二人が1m離れて立っているとし、音速を340m/s、サンプリング周波数を22050とすると、dpは(1/340)x22050=64.9。反射経路は1回反射波が3.4m、2回反射波が5.1m、3回反射波が6m、4回反射波が8mと想定すると、それぞれの差は2.4m、1.7m、1.9m、2.0mで平均2mとなるので、dsは(2/340)x22050=129.7。

<<EX-2.8>>

まずEX-2.7で算出したdp,dsと与えられたプログラムの減衰率を用いてecho_bath01.wavを作成したところ、実際の浴室より反響が少なくすっきりとした音であった。
次に、風呂場は狭いため多数の高次反射波が発生すると考え、高次反射の回数を20回にしてecho_bath02.wavを作成したところ、反響が残る感じが浴室の印象に近づいた。
さらに、風呂場の壁面、床、天井は平らで音を吸収しにくいと考え、減衰率を大きくし、初期反射を0.4、工事反射を0.6としたところ、反響がうるさい感じがさらに浴室の印象に近づいた。

<<EX-2.9>>

大浴場として、床面が１０m四方の正方形、高さが１０mの空間を考える。この空間にC,Dの二人が5m離れて立っているとし、音速を340m/s、サンプリング周波数を22050とすると、dpは(5/340)x22050=324、反射経路は1回反射波が17mm、2回反射波が25.5m、3回反射波が30m、4回反射波が40mと想定すると、それぞれの差は12m,8.5m,9.5m,10mで平均10mとなるので、dsは(10/340)x22050=648.5。
上記で元mでたdp,dsと、演習資料で与えられた値ap=0.25,as=0.4,rs=10を用いてecho_bath_large01.wavを作成したところ、EX-2.7で得られた音声とあまり違いが感じられなかった。
次に、大浴場は壁や床が音を吸収しにくく減衰率が低いと考え、EX.2-8と同様に初期反射を0.4、工事反射を0.6とし、同時に高次反射も多数発生すると考えrs＝20としてecho_bath_large02.wavを作成したところ、echo_bath_large01.wavより響きが大きくなったが、まだ大浴場の音の反響具合には程遠かった。
次に、大浴場は浴室よりもより壁面や床の音の吸収性が小さく、減衰率が大きい値になると考え、ap=0.5,as=0.75としたところ、かなり大浴場の印象に近づいた。

<<全体の感想>>

実際の環境をモデル化してパラメータを決定し、そのパラメータから音声を生成し、実際の音と比較する、という流れを体験できて非常に面白かった。パラメータを推定して実際に聴き比べると、想定とは大幅に違った音が出ることが多かった。試行錯誤する中で生成した音と実際の音がだんだん近づいていき、実際の環境でのパラメータの値がおおよそ判明した時は感動した。またこのような実践的な演習に取り組んでみたい。